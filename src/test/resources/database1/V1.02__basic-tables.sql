
SET FOREIGN_KEY_CHECKS = 0;
CREATE TABLE `participant` ( `participant_id` int(10) unsigned NOT NULL AUTO_INCREMENT, `babyshower_id` int(10) unsigned NOT NULL, `created_date` bigint(20) NOT NULL, `last_updated` bigint(20) NOT NULL, `email` varchar(64) NOT NULL, `name` varchar(45) NOT NULL, `deleted` bit(1) NOT NULL, `deleted_date` bigint(20) DEFAULT NULL, PRIMARY KEY (`participant_id`), KEY `fk_participant_babyshower_idx` (`babyshower_id`), CONSTRAINT `fk_participant_babyshower` FOREIGN KEY (`babyshower_id`) REFERENCES `babyshower` (`babyshower_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
CREATE TABLE `invitation` ( `invitation_id` int(10) unsigned NOT NULL AUTO_INCREMENT, `participant_id` int(10) unsigned NOT NULL, `created_date` bigint(20) NOT NULL, `sent_date` bigint(20) NOT NULL, `rsvp` bit(1) NOT NULL, `rsvp_date` bigint(20) NOT NULL, `message` text DEFAULT NULL, `deleted` bit(1) NOT NULL, `deleted_date` bigint(20) DEFAULT NULL, PRIMARY KEY (`invitation_id`), KEY `fk_invitation_participant_idx` (`participant_id`), CONSTRAINT `fk_invitation_participant` FOREIGN KEY (`participant_id`) REFERENCES `participant` (`participant_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
CREATE TABLE `gift` ( `gift_id` int(10) unsigned NOT NULL AUTO_INCREMENT, `participant_id` int(11) unsigned NOT NULL, `name` varchar(45) NOT NULL, `created_date` bigint(20) NOT NULL, `last_updated` bigint(20) NOT NULL, `number_available` int(11) NOT NULL, `price` int(11) NOT NULL, `description` text NOT NULL, `url` varchar(256) DEFAULT NULL, `picture` varchar(64) DEFAULT NULL, `deleted` bit(1) NOT NULL, `deleted_date` bigint(20) DEFAULT NULL, PRIMARY KEY (`gift_id`), KEY `fk_gift_participant_idx` (`participant_id`), CONSTRAINT `fk_gift_participant` FOREIGN KEY (`participant_id`) REFERENCES `participant` (`participant_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
CREATE TABLE `babyshower` ( `babyshower_id` int(10) unsigned NOT NULL AUTO_INCREMENT, `account_id` int(11) unsigned NOT NULL, `created_date` bigint(20) NOT NULL, `last_updated` bigint(20) NOT NULL, `name_of_party` varchar(45) NOT NULL, `date_of_party` varchar(45) DEFAULT NULL, `time_of_party` varchar(45) DEFAULT NULL, `theme` varchar(45) DEFAULT NULL, `name_of_baby` varchar(45) DEFAULT NULL, `dob_baby` varchar(45) DEFAULT NULL, `name_of_mom` varchar(45) DEFAULT NULL, `address` varchar(45) DEFAULT NULL, `deleted` bit(1) NOT NULL, `deleted_date` bigint(20) DEFAULT NULL, PRIMARY KEY (`babyshower_id`), KEY `fk_babyshower_account_idx` (`account_id`), CONSTRAINT `fk_babyshower_account` FOREIGN KEY (`account_id`) REFERENCES `account` (`account_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
ALTER TABLE `account` ADD COLUMN `deleted` bit(1) NOT NULL AFTER `verified`, ADD COLUMN `deleted_date` bigint(20) NULL DEFAULT NULL AFTER `deleted`;
SET FOREIGN_KEY_CHECKS = 1;
